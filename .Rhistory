geom_line(aes(dia, cantos,group= pos,alpha=1/(1+(ceiling(nrow(mortos)/2))^2)),colour='red') +
scale_x_date()
mortos$pos=1:nrow(mortos)
View(mortos)
mord=gather(mortos,key="dia",value="cantos",-V1,-pos,-distancias)
mord$dia=as.Date(mord$dia)
ggplot(mord) +
geom_line(aes(dia, cantos,group= pos,alpha=1/(1+(ceiling(nrow(mortos)/2))^2)),colour='red') +
scale_x_date()
ggplot(mord) +
geom_line(aes(dia, cantos,group= pos,alpha=pos,colour='red') +
scale_x_date()
ggplot(mord) +
geom_line(aes(dia, cantos,group= pos,alpha=pos,colour='red')) +
scale_x_date()
ggplot(mord) +
geom_line(aes(dia, cantos,group= pos,alpha=pos),colour='red') +
scale_x_date()
dis=abs(maxsm[aceptados]-mm)
indmort=order(dis)
distancias=dis[indmort]
mortos=mortos[indmort,]
mortos$distancias=distancias
mortos$pos=1:nrow(mortos)
mord=gather(mortos,key="dia",value="cantos",-V1,-pos,-distancias)
mord$dia=as.Date(mord$dia)
ggplot(mord) +
geom_line(aes(dia, cantos,group= pos,alpha=pos),colour='red') +
scale_x_date()
View(mortos)
ggplot(mord) +
geom_line(aes(dia, cantos,group= pos,alpha=1/(1+distancias^2)),colour='red') +
scale_x_date()
maxsm=apply(mortos,1,max)
maxsm
mortos= read.table("SimulaNavarra_XM.txt")
names(mortos)[-1]=format(datas,"%Y-%m-%d")
maxsm=apply(mortos,1,max)
maxsm
mm=ceiling(median(maxsm))
aceptados=which(abs(maxsm-mm)<marxe)
aceptados
dis=abs(maxsm[aceptados]-mm)
maxsm[aceptados]
maxsm[aceptados]
maxsm[aceptados]-mm)
dis=abs(maxsm[aceptados]-mm)
dis
indmort=order(dis)
indmort=order(dis)
ordenados=mortos[abs(maxsm-mm)<marxe,]
mortos= read.table("SimulaNavarra_XM.txt")
names(mortos)[-1]=format(datas,"%Y-%m-%d")
ordenados=mortos[order(abs(maxsm-mm)),]
dist=abs(maxsm-mm)
mortos$dis=dist
ordenados=mortos[order(dist),]
View(ordenados)
aceptados=ordenados[abs(dis)<marxe)]
aceptados=ordenados[abs(dis)<marxe]
mortos=aceptados
View(mord)
View(mortos)
mord=gather(mortos,key="dia",value="cantos",-V1,-dis)
mord$dia=as.Date(mord$dia)
ggplot(mord) +
geom_line(aes(dia, cantos,group= pos,alpha=1/(1+distancias^2)),colour='red') +
scale_x_date()
mortos$pos=1:nrow(mortos)
mord=gather(mortos,key="dia",value="cantos",-V1,-dis,-pos)
mord$dia=as.Date(mord$dia)
ggplot(mord) +
geom_line(aes(dia, cantos,group= pos,alpha=1/(1+distancias^2)),colour='red') +
scale_x_date()
mord=gather(mortos,key="dia",value="cantos",-V1,-dis,-pos)
mord$dia=as.Date(mord$dia)
ggplot(mord) +
geom_line(aes(dia, cantos,group= pos,alpha=1/(1+distancias^2)),colour='red') +
scale_x_date()
View(mortos)
ggplot(mord) +
geom_line(aes(dia, cantos,group= pos,alpha=1/(1+dis^2)),colour='red') +
scale_x_date()
mord$dia=as.Date(mord$dia)
ggplot(mord) +
geom_line(aes(dia, cantos,group= pos,alpha=1/(1+dis^2)),colour='red') +
scale_x_date()
mortos=aceptados
mortos$pos=1:nrow(mortos)
mord=gather(mortos,key="dia",value="cantos",-V1,-dis,-pos)
mord$dia=as.Date(mord$dia)
ggplot(mord) +
geom_line(aes(dia, cantos,group= pos),colour='red') +
scale_x_date()
names(mortos)
mord=gather(mortos,key="dia",value="cantos",-V1,-dis,-pos)
mord
View(mord)
mortos= read.table("SimulaNavarra_XM.txt")
names(mortos)[-1]=format(datas,"%Y-%m-%d")
maxsm=apply(mortos,1,max)
marxe=as.double(erro[3])
mm=ceiling(median(maxsm))
dist=abs(maxsm-mm)
mortos$dis=dist
ordenados=mortos[order(dist),]
aceptados=ordenados[abs(dis)<marxe]
mortos=aceptados
View(mortos)
mortos=mortos[-999,]
View(mortos)
mortos$pos=1:nrow(mortos)
mord=gather(mortos,key="dia",value="cantos",-V1,-dis,-pos)
mord$dia=as.Date(mord$dia)
ggplot(mord) +
geom_line(aes(dia, cantos,group= pos),colour='red') +
scale_x_date()
mortos= read.table("SimulaNavarra_XM.txt")
names(mortos)[-1]=format(datas,"%Y-%m-%d")
maxsm=apply(mortos,1,max)
marxe=as.double(erro[3])
mm=ceiling(median(maxsm))
dist=abs(maxsm-mm)
mortos$dis=dist
ordenados=mortos[order(dist),]
aceptados=ordenados[abs(mortos$dis)<marxe]
aceptados=ordenados[abs(mortos$dis)<marxe,]
mortos=aceptados
View(aceptados)
mortos_raw= read.table("SimulaNavarra_XM.txt")
names(mortos)[-1]=format(datas,"%Y-%m-%d")
mortos_raw= read.table("SimulaNavarra_XM.txt")
names(mortos_raw)[-1]=format(datas,"%Y-%m-%d")
maxsm=apply(mortos_raw,1,max)
marxe=as.double(erro[3])
mm=ceiling(median(maxsm))
dist=abs(maxsm-mm)
mortos_raw$dis=dist
ordenados=mortos_raw[order(dist),]
aceptados=ordenados[abs(ordenados$dis)<marxe,]
aceptados
View(aceptados)
mortos=aceptados
mortos$pos=1:nrow(mortos)
names(mortos)
mord=gather(mortos,key="dia",value="cantos",-V1,-dis,-pos)
mord$dia=as.Date(mord$dia)
ggplot(mord) +
geom_line(aes(dia, cantos,group= pos),colour='red') +
scale_x_date()
ggplot(mord) +
geom_line(aes(dia, cantos,group= pos,alpha=dis),colour='red') +
scale_x_date()
ggplot(mord) +
geom_line(aes(dia, cantos,group= pos,alpha=1/(dis^2 +1),colour='red') +
scale_x_date()
ggplot(mord) +
geom_line(aes(dia, cantos,group= pos,alpha=1/(dis^2 +1)),colour='red') +
scale_x_date()
ggplot(mord) +
geom_line(aes(dia, cantos,group= pos,alpha=1/(dis^2 +1)),colour='red') +
scale_x_date()
ggplot(mord) +
geom_line(aes(dia, cantos,group= pos,colour='red') +
scale_x_date()
ggplot(mord) +
geom_line(aes(dia, cantos,group= pos),colour='red') +
scale_x_date()
ggplot(mord) +
geom_line(aes(dia, cantos,group= pos),colour='red') +
scale_x_date()
ggplot(mord) +
geom_line(aes(dia, cantos,group= V1),colour='red') +
scale_x_date()
exp(1)
ggplot(mord) +
geom_line(aes(dia, cantos,group= V1,alpha=exp(-dis)),colour='red') +
scale_x_date()
erro
which.min(abs(mortos_raw[,ncol(mortos_raw)]-erro[2]))
which.min(abs(mortos_raw[,ncol(mortos_raw)]-erro[2]))
marxe=as.double(erro[3])
morutlimodia=as.double(erro[2])
which.min(abs(mortos_raw[,ncol(mortos_raw)]-morultimodia))
marxe=as.double(erro[3])
morutlimodia=as.double(erro[2])
which.min(abs(mortos_raw[,ncol(mortos_raw)]-morultimodia))
morutlimodia=as.double(erro[2])
which.min(abs(mortos_raw[,ncol(mortos_raw)]-morultimodia))
morutlimodia=as.double(erro[2])
morulitmodia
morultimodia=as.double(erro[2])
which.min(abs(mortos_raw[,ncol(mortos_raw)]-morultimodia))
order(abs(mortos_raw[,ncol(mortos_raw)]-morultimodia))
marxe=as.double(erro[3])
morultimodia=as.double(erro[2])
distancias=(abs(mortos_raw[,ncol(mortos_raw)]-morultimodia))
mortos_raw$dis=dist
View(mortos_raw)
mortos_raw$dis=distancias
marxe=as.double(erro[3])
morultimodia=as.double(erro[2])
distancias=(abs(mortos_raw[,ncol(mortos_raw)]-morultimodia))
mortos_raw$dis=distancias
ordenados=mortos_raw[mortos_raw$dis,]
aceptados=ordenados[abs(ordenados$dis)<marxe,]
View(aceptados)
datos= read.table("SimulaNavarra_I1.txt")
mortos_raw= read.table("SimulaNavarra_XM.txt")
erro=read.table("SimulaNavarra_Error.txt")
datas=as.Date(as.Date("2020-03-03"):as.Date("2020-04-20"),origin="1970-01-01")
names(datos)[-1]=format(datas,"%Y-%m-%d")
names(mortos_raw)[-1]=format(datas,"%Y-%m-%d")
marxe=as.double(erro[3])
morultimodia=as.double(erro[2])
distancias=(abs(mortos_raw[,ncol(mortos_raw)]-morultimodia))
distancias
mortos_raw$dis=distancias
ordenados=mortos_raw[order(mortos_raw$dis),]
aceptados=ordenados[abs(ordenados$dis)<marxe,]
View(aceptados)
mortos=aceptados
mortos=aceptados
mortos$pos=1:nrow(mortos)
mord=gather(mortos,key="dia",value="cantos",-V1,-dis,-pos)
mord$dia=as.Date(mord$dia)
names(mortos)
mord$dia=as.Date(mord$dia)
ggplot(mord) +
geom_line(aes(dia, cantos,group= V1,alpha=exp(-dis)),colour='red') +
scale_x_date()
ggplot(mord) +
geom_line(aes(dia, cantos,group= V1,alpha=exp(-100*dis)),colour='red') +
scale_x_date()
ggplot(mord) +
geom_line(aes(dia, cantos,group= V1,alpha=exp(-dis^2)),colour='red') +
scale_x_date()
ggplot(mord) +
geom_line(aes(dia, cantos,group= V1,alpha=exp(-dis^2)),colour='red') +
scale_x_date() +
theme(
legend.title = element_blank(),
panel.grid.minor = element_blank(),
legend.position = "bottom",
plot.margin = margin(3,15,3,3,"mm")
)
install.packages(c("gridExtra", "shadowtext"))
ggplot(mord) +
geom_line(aes(dia, cantos,group= V1,alpha=exp(-dis^2)),colour='red') +
scale_x_date() +
theme(
legend.title = element_blank(),
panel.grid.minor = element_blank(),
legend.position = "none",
plot.margin = margin(3,15,3,3,"mm")
)
ggplot(mord) +
geom_line(aes(dia, cantos,group= V1,alpha=1/(1+x^5)),colour='red') +
scale_x_date() +
theme(
legend.title = element_blank(),
panel.grid.minor = element_blank(),
legend.position = "none",
plot.margin = margin(3,15,3,3,"mm")
)
ggplot(mord) +
geom_line(aes(dia, cantos,group= V1,alpha=1/(1+dis^5)),colour='red') +
scale_x_date() +
theme(
legend.title = element_blank(),
panel.grid.minor = element_blank(),
legend.position = "none",
plot.margin = margin(3,15,3,3,"mm")
)
ggplot(mord) +
geom_line(aes(dia, cantos,group= V1,alpha=1/(1+dis^5)),colour='red') +
scale_x_date() +
theme(
legend.title = element_blank(),
panel.grid.minor = element_blank(),
legend.position = "none",
plot.margin = margin(3,3,3,3,"mm")
)
ggplot(mord) +
geom_line(aes(dia, cantos,group= V1,alpha=1/(1+dis^5)),colour='red') +
scale_x_date() +
theme(
legend.title = element_blank(),
panel.grid.minor = element_blank(),
legend.position = "none",
plot.margin = margin(3,3,3,3,"mm") +
theme_bw()
)
ggplot(mord) +
geom_line(aes(dia, cantos,group= V1,alpha=1/(1+dis^5)),colour='red') +
scale_x_date() +
theme_bw()+
theme(
legend.title = element_blank(),
panel.grid.minor = element_blank(),
legend.position = "none",
plot.margin = margin(3,3,3,3,"mm") +
theme_bw()
)
ggplot(mord) +
geom_line(aes(dia, cantos,group= V1,alpha=1/(1+dis^5)),colour='red') +
scale_x_date() +
theme_bw()
ggplot(mord) +
geom_line(aes(dia, cantos,group= V1,alpha=1/(1+dis^5)),colour='red') +
scale_x_date() +
theme_bw(legend.position = "none")
ggplot(mord) +
geom_line(aes(dia, cantos,group= V1,alpha=1/(1+dis^5)),colour='red',show.legend=FALSE) +
scale_x_date() +
theme_bw()
mortos$pos=1:nrow(mortos)
setwd("~/Modelo_Covid_descargado/Results/Navarra/")
datos= read.table("SimulaNavarra_I1.txt")
mortos_raw= read.table("SimulaNavarra_XM.txt")
erro=read.table("SimulaNavarra_Error.txt")
n=nrow(mortos)
datas=as.Date(as.Date("2020-03-03"):as.Date("2020-04-20"),origin="1970-01-01")
names(mortos_raw)[-1]=format(datas,"%Y-%m-%d")
marxe=as.double(erro[3])
morultimodia=as.double(erro[2])
distancias=(abs(mortos_raw[,ncol(mortos_raw)]-morultimodia))
mortos_raw$dis=distancias
ordenados=mortos_raw[order(mortos_raw$dis),]
aceptados=ordenados[abs(ordenados$dis)<marxe,]
mortos=aceptados
mortos$pos=1:nrow(mortos)
mord=gather(mortos,key="dia",value="cantos",-V1,-dis,-pos)
mord=gather(mortos,key="dia",value="cantos",-V1,-dis)
mord$dia=as.Date(mord$dia)
ggplot(mord) +
geom_line(aes(dia, cantos,group= V1,alpha=1/(1+dis^5)),colour='red',show.legend=FALSE) +
scale_x_date() +
theme_bw()
View(mortos_raw)
View(aceptados)
mord=gather(mortos,key="dia",value="cantos",-V1,-dis)
mord$dia=as.Date(mord$dia)
ggplot(mord) +
geom_line(aes(dia, cantos,group= V1,alpha=1/(1+dis^5)),colour='red',show.legend=FALSE) +
scale_x_date() +
theme_bw()
mord=gather(mortos,key="dia",value="cantos",-V1,-dis)
View(mord)
marxe=as.double(erro[3])
morultimodia=as.double(erro[2])
distancias=(abs(mortos_raw[,ncol(mortos_raw)]-morultimodia))
mortos_raw$dis=distancias
ordenados=mortos_raw[order(mortos_raw$dis),]
aceptados=ordenados[abs(ordenados$dis)<marxe,]
mortos=aceptados
mord=gather(mortos,key="dia",value="cantos",-V1,-dis)
View(mord)
mord$dia=as.Date(mord$dia)
ggplot(mord) +
geom_line(aes(dia, cantos,group= V1,alpha=1/(1+dis^5)),colour='red',show.legend=FALSE) +
scale_x_date() +
theme_bw()
ggplot(mord) +
geom_line(aes(dia, cantos,group= V1,alpha=1/(1+dis)),colour='red',show.legend=FALSE) +
scale_x_date() +
theme_bw()
ggplot(mord) +
geom_line(aes(dia, cantos,group= V1,alpha=1/(1+dis^2)),colour='red',show.legend=FALSE) +
scale_x_date() +
theme_bw()
ggplot(mord) +
geom_line(aes(dia, cantos,group= V1,alpha=1/(1+dis^4)),colour='red',show.legend=FALSE) +
scale_x_date() +
theme_bw()
trayectorias= mortos[,-1]
library("fda.usc")
datosfda= fdata(trayectorias)
plot(datosfda)
trayectorias= mortos_raw[,-1]
library("fda.usc")
datosfda= fdata(trayectorias)
plot(datosfda)
trayectorias= mortos_raw[,-1]
library("fda.usc")
datosfda= fdata(trayectorias)
plot(datosfda)
datos= read.table("SimulaNavarra_I1.txt")
mortos_raw= read.table("SimulaNavarra_XM.txt")
erro=read.table("SimulaNavarra_Error.txt")
trayectorias= mortos_raw[,-1]
library("fda.usc")
datosfda= fdata(trayectorias)
plot(datosfda)
library("tidyr")
library("ggplot2")
setwd("~/Modelo_Covid_descargado/Results/Navarra/")
datos= read.table("SimulaNavarra_I1.txt")
mortos_raw= read.table("SimulaNavarra_XM.txt")
erro=read.table("SimulaNavarra_Error.txt")
trayectorias= mortos_raw[,-1]
library("fda.usc")
datosfda= fdata(trayectorias)
plot(datosfda)
datas=as.Date(as.Date("2020-03-03"):as.Date("2020-04-20"),origin="1970-01-01")
names(datos)[-1]=format(datas,"%Y-%m-%d")
names(mortos_raw)[-1]=format(datas,"%Y-%m-%d")
#datos=datos[1:50,]
marxe=as.double(erro[3])
morultimodia=as.double(erro[2])
distancias=(abs(mortos_raw[,ncol(mortos_raw)]-morultimodia))
mortos_raw$dis=distancias
ordenados=mortos_raw[order(mortos_raw$dis),]
aceptados=ordenados[abs(ordenados$dis)<marxe,]
mortos=aceptados
mord=gather(mortos,key="dia",value="cantos",-V1,-dis)
mord$dia=as.Date(mord$dia)
ggplot(mord) +
geom_line(aes(dia, cantos,group= V1,alpha=1/(1+dis^4)),colour='red',show.legend=FALSE) +
scale_x_date() +
theme_bw()
ggplot(mord) +
geom_line(aes(dia, cantos,group= V1,alpha=1/(1+dis^10)),colour='red',show.legend=FALSE) +
scale_x_date() +
theme_bw()
ggplot(mord) +
geom_line(aes(dia, cantos,group= V1,alpha=1/((1+dis)^10)),colour='red',show.legend=FALSE) +
scale_x_date() +
theme_bw()
ggplot(mord) +
geom_line(aes(dia, cantos,group= V1,alpha=1/((1+dis)^10)),colour='green',show.legend=FALSE) +
scale_x_date() +
theme_bw()
ggplot(mord) +
geom_line(aes(dia, cantos,group= V1,alpha=1/((1+dis)^10)),colour='darkorange',show.legend=FALSE) +
scale_x_date() +
theme_bw()
ggplot(mord) +
geom_line(aes(dia, cantos,group= V1,alpha=1/((1+dis)^10)),colour='blue',show.legend=FALSE) +
scale_x_date() +
theme_bw()
setwd("~/Videos")
setwd("~/")
read.table('archSoluciones_Madrid.txt',header=FALSE)
leb=read.table('archSoluciones_Madrid.txt',header=FALSE)
View(leb)
install.packages("plotly")
library('plotly')
library('plotly')
fig <- plot_ly(x = leb[,1], y = leb[,2], z = leb[,]) %>% add_surface()
fig
library(plotly)
install.packages("plotly")
install.packages("plotly")
install.packages("openssl")
install.packages("plotly")
library(plotly)
leb=read.table('archSoluciones_Madrid.txt',header=FALSE)
fig <- plot_ly(x = leb[,1], y = leb[,2], z = leb[,]) %>% add_surface()
fig
fig <- plot_ly(x = leb[,1], y = leb[,2], z = leb[,3]) %>% add_surface()
fig
z <- outer(leb[,1], leb[,2], leb[,3])
library(plot3D)
install.packages("plot3D")
x=leb[,1]
y=leb[,2]
z=leb[,3]
library(plot3D)
scatter3D(x, y, z, bty = "g", colkey = TRUE, main ="x-y-z plot",phi = 10,theta=50)
scatter3D(x, y, z, bty = "g", colkey = TRUE, main ="x-y-z plot")
plot3D(x, y, z)
plot3d(x, y, z)
library(plot3D)
plot3d(x, y, z)
scatter3d(x, y, z)
scatter3D(x, y, z)
scatter3D(x, y, z,phi=45)
scatter3D(x, y, z,phi=1)
scatter3D(x, y, z,phi=1.5)
scatter3D(x, y, z,theta=1.5)
scatter3D(x, y, z,theta=3)
scatter3D(x, y, z,theta=4)
scatter3D(x, y, z,theta=50)
scatter3D(x, y, z,theta=80)
scatter3D(x, y, z)
setwd(~/)
setwd(~)
rmarkdown::render('~/repodir/forecastcovid/Rmds/Espana/res_Galicia.Rmd',output_file='~/reporidr/forecastcovid/Rmds/Espana/Galicia/main.html')
setwd(~)
setwd(~/repodir)
setwd(~repodir)
getwd()
setwd(repodir)
setwd("~/repodir")
setwd("~/repodir/forecastcovid")
setwd("~/repodir/forecastCovid")
ls
setwd("~/repodir/forecastCovid/src")
rmarkdown::render("~/repodir/forecastcovid/Rmds/Espana/res_Galicia.Rmd",output_file="~/reporidr/forecastcovid/Rmds/Espana/Galicia/main.html")
rmarkdown::render("../Rmds/Espana/res_Galicia.Rmd",output_file="../Rmds/Espana/Galicia/main.html")
setwd("..")
getwd()
setwd("/Rmds/Espana/")
setwd("Rmds/Espana/")
getwd()
setwd("~/repodir/forecastCovid/src")
setwd("..")
rmarkdown::render("Rmds/Espana/res_Galicia.Rmd",output_file="Rmds/Espana/Galicia/main.html")
rmarkdown::render("Rmds/Espana/res_Galicia.Rmd",output_file="Rmds/Espana/Galicia/main.html")
rmarkdown::render("Rmds/Espana/res_Galicia.Rmd",output_file="Rmds/Espana/Galicia/main.html")
rmarkdown::render("Rmds/Espana/res_Galicia.Rmd",output_file="Galicia/main.html")
