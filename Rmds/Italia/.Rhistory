knitr::opts_chunk$set(echo = TRUE)
i=12 #indice da autonomia
i1_raw= read.table("../../src/Results/Italia/Bolzano/SimulaBolzano_I1.txt")
i2_raw= read.table("../../src/Results/Italia/Bolzano/SimulaBolzano_I2.txt")
i3_raw= read.table("../../src/Results/Italia/Bolzano/SimulaBolzano_I3.txt")
r1_raw= read.table("../../src/Results/Italia/Bolzano/SimulaBolzano_R1.txt")
r2_raw= read.table("../../src/Results/Italia/Bolzano/SimulaBolzano_R2.txt")
mortos_raw=read.table("../../src/Results/Italia/Bolzano/SimulaBolzano_XM.txt")
erro=read.table("../../src/Results/Italia/Bolzano/SimulaBolzano_Error.txt")
reais_raw=read.table("../../src/Results/Italia/Basilicata/SimulaBasilicata_XM_Real.txt")
i1_raw$V1=i1_raw$V1+1
i2_raw$V1=i2_raw$V1+1
i3_raw$V1=i3_raw$V1+1
r1_raw$V1=r1_raw$V1+1
r2_raw$V1=r2_raw$V1+1
mortos_raw$V1=mortos_raw$V1+1
autonomias=read.csv("../../Data/Italia/Italia_Poblacion.csv",header=TRUE,sep=',')
reais=read.csv("../../Data/Italia/Italia_Fallecidos.csv",header=TRUE,sep=',')
knitr::opts_chunk$set(echo = TRUE)
reais=read.csv("../../Data/Espana/Espana_Fallecidos.csv",header=TRUE,sep=',')
reais
reais_raw=read.table("../../src/Results/Espana/Andalucia/SimulaAndalucia_XM_Real.txt")
reais_raw
reais=read.csv("../../Data/Espana/Espana_Fallecidos.csv",header=TRUE,sep=',')
reais
knitr::opts_chunk$set(echo = TRUE)
i=16 #indice da autonomia
i1_raw= read.table("../../src/Results/Italia/Sardegna/SimulaSardegna_I1.txt")
i2_raw= read.table("../../src/Results/Italia/Sardegna/SimulaSardegna_I2.txt")
i3_raw= read.table("../../src/Results/Italia/Sardegna/SimulaSardegna_I3.txt")
r1_raw= read.table("../../src/Results/Italia/Sardegna/SimulaSardegna_R1.txt")
r2_raw= read.table("../../src/Results/Italia/Sardegna/SimulaSardegna_R2.txt")
mortos_raw=read.table("../../src/Results/Italia/Sardegna/SimulaSardegna_XM.txt")
erro=read.table("../../src/Results/Italia/Sardegna/SimulaSardegna_Error.txt")
reais_raw=read.table("../../src/Results/Italia/Sardegna/SimulaSardegna_XM_Real.txt")
i1_raw$V1=i1_raw$V1+1
i2_raw$V1=i2_raw$V1+1
i3_raw$V1=i3_raw$V1+1
r1_raw$V1=r1_raw$V1+1
r2_raw$V1=r2_raw$V1+1
mortos_raw$V1=mortos_raw$V1+1
autonomias=read.csv("../../Data/Italia/Italia_Poblacion.csv",header=TRUE,sep=',')
reais=read.csv("../../Data/Italia/Italia_Fallecidos.csv",header=TRUE,sep=',')
####################
##### ATA AQUI #####
####################
reaisi=as.numeric(reais[(reais[,1])==i,])
nceros=0
j=0
while(reaisi[j+3]==0) {
nceros=nceros+1
j=j+1
}
d=ncol(mortos_raw)
r= 18-nceros#numero de dias con antelacion cos que empeza o simulador
datas=seq( as.Date("2020-03-03")-r, by=1, len=d-1)
names(i1_raw)[-1]=format(datas,"%Y-%m-%d")
names(i2_raw)[-1]=format(datas,"%Y-%m-%d")
names(i3_raw)[-1]=format(datas,"%Y-%m-%d")
names(r1_raw)[-1]=format(datas,"%Y-%m-%d")
names(r2_raw)[-1]=format(datas,"%Y-%m-%d")
names(mortos_raw)[-1]=format(datas,"%Y-%m-%d")
morultimodia=as.double(erro[1])
distancias=(abs(mortos_raw[,ncol(mortos_raw)]-morultimodia))
morultimodia=as.double(erro[1])
distancias=(abs(mortos_raw[,ncol(mortos_raw)]-morultimodia))
hist(distancias,main="Last day error",xlab="Individuals")
index=order(distancias)
ordenados=mortos_raw[index,]
ordenados$dis=distancias[index]
aceptados=ordenados[ordenados$dis<morultimodia*0.1,]
mortos=aceptados
aceptados[1,ncol(aceptados)]=-0.9 #para que soamente apareza unha liÃ±a grosa nas graficas que non son de M
moreais=c(-1,as.numeric(reais_raw[1,2:length(reais_raw)]),-1)
mortosconreais=rbind(aceptados,moreais)
library("fda.usc")
plot(fdata(mortosconreais))
plot(fdata(mortosconreais))
plot(fdata(mortos_raw))
plot(fdata(mortos_raw),main="All simulated fatality trajectories")
plot(fdata(mortos_raw),main="All simulated fatality trajectories")
i=1 #indice da autonomia
i1_raw= read.table("../../src/Results/Espana/Andalucia/SimulaAndalucia_I1.txt")
i2_raw= read.table("../../src/Results/Espana/Andalucia/SimulaAndalucia_I2.txt")
i3_raw= read.table("../../src/Results/Espana/Andalucia/SimulaAndalucia_I3.txt")
r1_raw= read.table("../../src/Results/Espana/Andalucia/SimulaAndalucia_R1.txt")
r2_raw= read.table("../../src/Results/Espana/Andalucia/SimulaAndalucia_R2.txt")
mortos_raw=read.table("../../src/Results/Espana/Andalucia/SimulaAndalucia_XM.txt")
erro=read.table("../../src/Results/Espana/Andalucia/SimulaAndalucia_Error.txt")
reais_raw=read.table("../../src/Results/Espana/Andalucia/SimulaAndalucia_XM_Real.txt")
plot(fdata(mortos_raw),main="All simulated fatality trajectories")
